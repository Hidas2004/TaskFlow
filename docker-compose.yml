version: '3.8'

services:
  taskflow_backend:
    build: .
    ports:
      - "8081:8080"
    depends_on:
      - taskflow_postgres
    # ğŸ‘‡ THÃŠM ÄOáº N NÃ€Y Äá»‚ Ã‰P DOCKER Äá»ŒC FILE .ENV
    env_file:
      - .env
    # ğŸ‘‡ THÃŠM ÄOáº N NÃ€Y Äá»‚ GHI ÄÃˆ Cáº¤U HÃŒNH DB CHO ÄÃšNG Máº NG DOCKER
    environment:
      - DB_HOST=taskflow_postgres  # Pháº£i trá» tÃªn service DB, khÃ´ng dÃ¹ng localhost
      - DB_USER=postgres
      - DB_PASSWORD=123456
      - DB_NAME=taskflow_db
      - JWT_SECRET=secret_key_cua_ban_123 # Ã‰p cá»©ng secret key Ä‘á»ƒ khÃ´ng bá»‹ lá»‡ch

  taskflow_postgres:
    image: postgres:16-alpine
    container_name: taskflow_postgres
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=123456
      - POSTGRES_DB=taskflow_db
    volumes:
      - taskflow_postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  taskflow_postgres_data: